window.translations = {
  // Shared (same for all languages)
  review_name1: "Blu2820",
  review_name2: "INVICTUS",
  review_name3: "DEVELOPER",
  discord: "Discord",
  telegram: "Telegram",
  youtube: "YouTube",
  tiktok: "TikTok",
  instagram: "Instagram",

  // Translatable
  vk: { en: "VK", ru: "ВКонтакте" },
  description: {
    en: "Fun pixel hide-and-seek online with friends!",
    ru: "Веселые пиксельные прятки онлайн с друзьями!"
  },
  watch_gameplay: {
    en: "Watch Gameplay",
    ru: "Геймплей игры"
  },
  game_features: {
    en: "Game Features",
    ru: "Особенности игры"
  },
  multiplayer_title: {
    en: "Multiplayer",
    ru: "Мультиплеер"
  },
  multiplayer_desc: {
    en: "Play online with friends or players from all over the world in real-time.",
    ru: "Играйте онлайн с друзьями или игроками со всего мира в реальном времени."
  },
  maps_title: {
    en: "Unique Maps",
    ru: "Уникальные карты"
  },
  maps_desc: {
    en: "Explore various pixel-art maps with many hiding spots and secrets.",
    ru: "Исследуйте различные пиксельные карты со множеством укрытий и секретов."
  },
  custom_title: {
    en: "Customization",
    ru: "Кастомизация"
  },
  custom_desc: {
    en: "Unlock cool skins and customize your character to stand out.",
    ru: "Разблокируйте крутые скины и настройте своего персонажа, чтобы выделиться."
  },
  rank_title: {
    en: "Leagues",
    ru: "Лиги"
  },
  rank_desc: {
    en: "Battle every 3 days with 50 players in your league (Paper, Wood, Bronze, Silver, Gold)!",
    ru: "Сражайся каждые 3 дня с 50 игроками в своей лиге (Бумажная, Деревянная, Бронзовая, Серебряная, Золотая)!"
  },
  physics_title: {
    en: "Physics",
    ru: "Физика"
  },
  physics_desc: {
    en: "Interact with the world! Every Prop can be knocked over or moved.",
    ru: "Взаимодействуйте с миром! Каждый предмет можно уронить или сдвинуть."
  },
  friends_title: {
    en: "Friends",
    ru: "Друзья"
  },
  friends_desc: {
    en: "Add friends and play together in any match.",
    ru: "Добавляйте друзей и играйте вместе в любом матче."
  },
  rooms_title: {
    en: "Custom Rooms",
    ru: "Создание комнат"
  },
  rooms_desc: {
    en: "Create private rooms with your own rules and invite friends.",
    ru: "Создавайте приватные комнаты со своими правилами и приглашайте друзей."
  },
  downloads: {
    en: "Downloads",
    ru: "Загрузки"
  },
  rating: {
    en: "Rating",
    ru: "Рейтинг"
  },
  reviews: {
    en: "Reviews",
    ru: "Отзывы"
  },
  unique_maps: {
    en: "Unique Maps",
    ru: "Карты"
  },
  release_date: {
    en: "Release Date",
    ru: "Дата релиза"
  },
  join_community: {
    en: "Join Our Community",
    ru: "Присоединяйтесь к нам"
  },
  discord_desc: {
    en: "Chat with players and developers",
    ru: "Общайтесь с игроками и разработчиками"
  },
  telegram_desc: {
    en: "Get instant updates and support",
    ru: "Получайте обновления и поддержку"
  },
  what_players_say: {
    en: "What Players Say",
    ru: "Что говорят игроки"
  },
  review_text1: {
    en: '"Basically, the game is 5 out of 5. Of course, beginners will have to guard the low tab because of the mops, but you just need to get a grenade and a weapon and you\'ll have a chance. But it\'s also fun to grind XP with friends without the developer knowing using the Medic perk. I recommend this game to everyone (die to a mop with the nickname INVICTUS)."',
    ru: '"В целом игра на 5 из 5. Конечно, новичкам придется попотеть в начале из-за мобов, но вам просто нужно раздобыть гранату и оружие, и у вас появится шанс. Но также весело фармить опыт с друзьями, используя перк Медик. Рекомендую эту игру всем (умрите от моба с ником INVICTUS)."'
  },
  review_text2: {
    en: '"Hunters vs Props is a fast-paced, creative, and incredibly fun game of hide-and-seek. With simple rules, dynamic maps, and hilarious moments, it offers great replayability, and now you can add friends."',
    ru: '"Hunters vs Props — это динамичная, креативная и невероятно веселая игра в прятки. Благодаря простым правилам, динамичным картам и забавным моментам, в нее хочется играть снова и снова, а теперь можно еще и добавлять друзей."'
  },
  review_text3: {
    en: '"Best game, there is much that can still be improved, but players like it. We ban cheaters."',
    ru: '"Лучшая игра, есть много что еще можно улучшить, но игрокам нравится. Читеров баним"'
  },
  faq_title: {
    en: "Frequently Asked Questions",
    ru: "Часто задаваемые вопросы"
  },
  faq_q1: {
    en: "How do I play as a Prop?",
    ru: "Как играть за предмет?"
  },
  faq_a1: {
    en: "As a Prop, you can transform into any object you find on the map. Your goal is to hide and survive until the timer runs out!",
    ru: "Как предмет, вы можете превратиться в любой объект на карте. Ваша цель — спрятаться и выжить до конца времени!"
  },
  faq_q2: {
    en: "Is the game free to play?",
    ru: "Игра бесплатная?"
  },
  faq_a2: {
    en: "Yes, H.I.D.E. Friends is free to download and play on all supported platforms.",
    ru: "Да, H.I.D.E. Friends бесплатна для загрузки и игры на всех поддерживаемых платформах."
  },
  faq_q3: {
    en: "Can I play with my friends?",
    ru: "Можно играть с друзьями?"
  },
  faq_a3: {
    en: "Absolutely! You can join the same server or create a private room to play with your friends.",
    ru: "Конечно! Вы можете зайти на один сервер или создать приватную комнату для игры с друзьями."
  },
  faq_q4: {
    en: "Why do I lose health when shooting as a Hunter?",
    ru: "Почему я теряю здоровье, когда стреляю за Охотника?"
  },
  faq_a4: {
    en: "Hunters lose health if they shoot at objects that are not players. Be careful and only shoot when you are sure it's a Prop!",
    ru: "Охотники теряют здоровье, если стреляют в предметы, которые не являются игроками. Будьте осторожны и стреляйте только тогда, когда уверены, что это Предмет!"
  },
  faq_q5: {
    en: "What should I do if the game freezes or crashes?",
    ru: "Что делать, если игра зависает или вылетает?"
  },
  faq_a5: {
    en: "Make sure you have a stable internet connection. If the problem persists, try clearing the game cache or reinstalling the app.",
    ru: "Убедитесь, что у вас стабильное интернет-соединение. Если проблема сохраняется, попробуйте очистить кэш игры или переустановить приложение."
  },
  faq_q6: {
    en: "Is an internet connection required?",
    ru: "Нужен ли интернет для игры?"
  },
  faq_a6: {
    en: "Yes, H.I.D.E. is an online multiplayer game and requires a stable Wi-Fi or mobile data connection.",
    ru: "Да, H.I.D.E. — это онлайн-игра, и для нее требуется стабильное подключение к Wi-Fi или мобильному интернету."
  },
  faq_q7: {
    en: "How to disable ads?",
    ru: "Как отключить рекламу?"
  },
  faq_a7: {
    en: "Ads after a round can be disabled by making any purchase in the store. Reward-based ad buttons cannot be disabled, but you can simply choose not to click them.",
    ru: "Рекламу при выходе из раунда можно отключить, совершив любую покупку в магазине. Рекламные кнопки с наградой отключить нельзя, их можно просто не нажимать."
  },
  ready_title: {
    en: "Ready to Hide or Seek?",
    ru: "Готовы прятаться или искать?"
  },
  ready_desc: {
    en: "Join millions of players and start your adventure today!",
    ru: "Присоединяйтесь к миллионам игроков и начните приключение сегодня!"
  },
  download_now: {
    en: "Download Now",
    ru: "Скачать сейчас"
  },
  join_discord: {
    en: "Join Discord",
    ru: "В Discord"
  },
  about_title: {
    en: "About H.I.D.E.",
    ru: "Об игре H.I.D.E."
  },
  about_desc: {
    en: "The ultimate hide-and-seek experience on mobile. Join millions of players worldwide in this thrilling pixel-art multiplayer game.",
    ru: "Лучшие прятки на мобильных устройствах. Присоединяйтесь к миллионам игроков по всему миру в этой захватывающей пиксельной игре."
  },
  quick_links: {
    en: "Quick Links",
    ru: "Ссылки"
  },
  about_game: {
    en: "About Game",
    ru: "Об игре"
  },
  screenshots: {
    en: "Screenshots",
    ru: "Скриншоты"
  },
  faq: {
    en: "FAQ",
    ru: "FAQ"
  },
  server_status: {
    en: "Server Status",
    ru: "Статус серверов"
  },
  server_status_label: {
    en: "Data Server:",
    ru: "Сервер данных:"
  },
  checking: {
    en: "Checking...",
    ru: "Проверка..."
  },
  online: {
    en: "Online",
    ru: "В сети"
  },
  offline: {
    en: "Offline",
    ru: "Не в сети"
  },
  legal: {
    en: "Legal",
    ru: "Юридическая информация"
  },
  privacy: {
    en: "Privacy Policy",
    ru: "Политика конфиденциальности"
  },
  terms: {
    en: "Terms & Conditions",
    ru: "Условия использования"
  },
  support: {
    en: "Support",
    ru: "Поддержка"
  },
  social: {
    en: "Social",
    ru: "Соцсети"
  },
  social_desc: {
    en: "Follow us on social media for the latest updates.",
    ru: "Следите за нами в социальных сетях, чтобы быть в курсе обновлений."
  },
  rights: {
    en: "Hand Games. All rights reserved.",
    ru: "Hand Games. Все права защищены."
  },
  go_to_top: {
    en: "Go to top",
    ru: "Наверх"
  }
};

document.addEventListener('DOMContentLoaded', () => {
  const langBtns = document.querySelectorAll('.lang-btn');
  
  // Auto-detect system language or use saved
  function getInitialLang() {
    const saved = localStorage.getItem('lang');
    if (saved) return saved;
    
    const navLang = navigator.language || navigator.userLanguage;
    const shortLang = navLang.split('-')[0];
    const supportedLangs = ['en', 'ru'];
    return supportedLangs.includes(shortLang) ? shortLang : 'en';
  }

  const currentLang = getInitialLang();

  window.updateLanguage = function(lang) {
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      const translation = window.translations[key];
      if (translation) {
        const text = typeof translation === 'string' ? translation : (translation[lang] || translation['en']);
        if (el.tagName === 'INPUT') {
          el.placeholder = text;
        } else {
          el.textContent = text;
        }
      }
    });

    document.querySelectorAll('[data-i18n-title]').forEach(el => {
      const key = el.getAttribute('data-i18n-title');
      const translation = window.translations[key];
      if (translation) {
        el.title = typeof translation === 'string' ? translation : (translation[lang] || translation['en']);
      }
    });

    langBtns.forEach(btn => {
      btn.classList.toggle('active', btn.textContent.toLowerCase() === lang);
    });
    localStorage.setItem('lang', lang);
  };

  updateLanguage(currentLang);

  langBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const lang = btn.textContent.toLowerCase();
      updateLanguage(lang);
      // Update server status text if needed
      if (typeof checkServerStatus === 'function') {
        checkServerStatus();
      }
    });
  });
});
